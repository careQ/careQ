<html layout:decorate="~{layout/layout.html}" xmlns:layout="http://www.w3.org/1999/xhtml">
<head>
    <title>회원 실시간 채팅방 페이지</title>
    <!--jQuery-->
    <!--    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>-->

</head>
<body>
<main layout:fragment="main" style="height: 100vh; display: flex; justify-content: center; align-items: center;">
    <div class="sm:w-1/3 md:w-1/2 lg:w-1/3 h-2/3 flex flex-col items-center justify-center overflow-hidden">
        <!-- 헤더 -->
        <div class="flex items-center mb-3">
            <a th:if="${@rq.login}" th:href="@{/members/chatrooms}">
                <div class="mr-7">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="#78C4BA">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                </div>
            </a>
            <div class="flex mx-8">
                <div class="flex-1 text-center">
                    <h1 class="font-semibold text-lg text-[#78C4BA]">Messages</h1>
                </div>
            </div>
            <div class="ml-7">
                <i class="fas fa-home text-[#78C4BA] text-l"></i>
            </div>
        </div>

        <div class="flex mx-8 mb-3">
            <div class="flex-1 text-center">
                <h1 class="font-normal text-m text-[#78C4BA]">원광대학교 산부인과</h1>
            </div>
        </div>

        <div class="flex-1 p-4 overflow-y-auto" id="chat-container">
            <!-- 실시간 채팅 동적으로 추가 -->
            <!-- TODO: 다인아 만약에 동적으로 생성하는 거 자바스크립트 꼬이면 그냥 아래 코드에서 제이쿼리 ${message} 빼고 네모 쓰면 될 듯? -->
            <!--            <div class="flex mb-2 w-56">-->
            <!--                <div class="bg-[#78C4BA] p-2 rounded-lg max-w-[70%] text-sm relative">-->
            <!--                    <p class="text-gray-500 font-semibold mb-1">관리자:</p>-->
            <!--                    <p>${message}</p>-->
            <!--                </div>-->
            <!--            </div>-->
            <!--            <div class="flex justify-end mb-2">-->
            <!--                <div class="bg-[#F6F6F6] p-2 rounded-lg max-w-[70%] text-sm relative">-->
            <!--                    <p class="text-gray-500 font-semibold mb-1">회원:</p>-->
            <!--                    <p>${message}</p>-->
            <!--                </div>-->
            <!--            </div>-->
        </div>
        <!-- 전송버튼 -->
        <div class="p-4 border-t border-[#78C4BA]">
            <div class="flex">
                <input id="message-input" type="text" class="flex-1 p-2 rounded-l-lg text-sm" placeholder="메시지를 입력하세요" style="font-size: 13px; border: 1px solid #ccc; width: 80%;">
                <button id="send-button" class="bg-[#78C4BA] text-white p-2 rounded-r-lg text-sm" style="min-width: 40px; font-size: 12px;">
                    전송
                </button>
            </div>
        </div>
    </div>
</main>
</body>
</html>
<script>
    // 관리자 메시지를 추가
    function addAdminMessage(message) {
        const chatContainer = document.getElementById("chat-container");
        const messageDiv = document.createElement("div");
        messageDiv.className = "flex mb-2 w-56"; // 메시지를 나타내는 messageDiv 요소에 CSS 클래스를 추가
        messageDiv.innerHTML = `
            <div class="flex mb-2 w-56">
                <div class="bg-[#78C4BA] p-2 rounded-lg max-w-[70%] text-Xs relative">
                    <p class="text-gray-500 font-semibold mb-1">관리자:</p>
                    <p>${message}</p>
                </div>
            </div>
    `;
        chatContainer.appendChild(messageDiv);
    }

    // 회원 메시지를 추가
    function addUserMessage(message) {
        const chatContainer = document.getElementById("chat-container");
        const messageDiv = document.createElement("div");
        messageDiv.className = "flex mb-2 w-56 justify-end"; // css 클래스 추가
        messageDiv.innerHTML = `
            <div class="bg-[#F6F6F6] p-2 rounded-lg max-w-[70%] text-xs relative" style="text-align: right;"> <!-- 오른쪽 정렬 설정 -->
                <p class="text-gray-500 font-semibold mb-1" style="text-align: right;">회원:</p>
                <p>${message}</p>
            </div>
    `;
        chatContainer.appendChild(messageDiv);
    }

    // Test
    addAdminMessage("안녕하세요. 원광대학교 산부인과입니다. 무엇을 도와드릴까요?");
    addUserMessage("안녕하세요. 저는 …….이 궁금합니다.");
</script>